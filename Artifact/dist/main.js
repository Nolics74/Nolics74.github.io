!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function a(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function r(e){return"number"==typeof e?e:e.reduce((e,t)=>e+t)}n.r(t);let s=new Map,l=new Map;l.set("Dimensional Portal","lane"),s.set("Dimensional Portal",function(e,t){let n=[[],[]];t=i.lanes[t];for(let e=0;e<3;e++){let e=v(O.Cards[132],G.players[G.getTurn()]);n[G.getTurn()].push(e)}return t.summon(n),!0}),l.set("Better Late Than Never","lane"),s.set("Better Late Than Never",function(e,t){let n=[[],[]];t=i.lanes[t];for(let e=0;e<1;e++){let e=v(O.Cards[132],G.players[G.getTurn()]);n[G.getTurn()].push(e)}return t.summon(n),!0}),l.set("Call the Reserves","lane"),s.set("Call the Reserves",function(e,t){let n=[[],[]];t=i.lanes[t];for(let e=0;e<2;e++){let e=v(O.Cards[132],G.players[G.getTurn()]);n[G.getTurn()].push(e)}return t.summon(n),!0}),l.set("Iron Branch Protection","unit"),s.set("Iron Branch Protection",function(e,t,n,a){return i.lanes[t].cards[a][n].currentArmor[5]+=3,i.lanes[t].cards[a][n].updateDisplay(),!0}),l.set("Avernus' Blessing","unit"),s.set("Avernus' Blessing",function(e,t,n,a){return i.lanes[t].cards[a][n].currentAttack[1+(1-n==G.getTurn())]+=2,i.lanes[t].cards[a][n].updateDisplay(),!0}),l.set("Double Edge","unit"),s.set("Double Edge",function(e,t,n,a){return"Red"==i.lanes[t].cards[a][n].Color&&"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentArmor[4]-=8,i.lanes[t].cards[a][n].currentAttack[4]+=8,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("Poised to Strike","unit"),s.set("Poised to Strike",function(e,t,n,a){return"Red"==i.lanes[t].cards[a][n].Color&&"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentAttack[4]+=4,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("Defensive Stance","unit"),s.set("Defensive Stance",function(e,t,n,a){return"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentArmor[4]+=3,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("Combat Training","unit"),s.set("Combat Training",function(e,t,n,a){return"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentAttack[1+(1-n==G.getTurn())]+=2,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("Enrage","unit"),s.set("Enrage",function(e,t,n,a){return"Red"==i.lanes[t].cards[a][n].Color&&"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentArmor[4]+=4,i.lanes[t].cards[a][n].currentAttack[4]+=4,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("God's Strength","unit"),s.set("God's Strength",function(e,t,n,a){return"Red"==i.lanes[t].cards[a][n].Color&&"Hero"==i.lanes[t].cards[a][n].CardType&&(i.lanes[t].cards[a][n].currentAttack[1+(1-n==G.getTurn())]+=2,i.lanes[t].cards[a][n].updateDisplay(),!0)}),l.set("Spring the Trap","lane"),s.set("Spring the Trap",function(e,t){let n=[[],[]];t=i.lanes[t];for(let e=0;e<2;e++){let e=v(O.Cards.find(function(e){return"Centaur Hunter"==e.Name}),G.players[G.getTurn()]);n[G.getTurn()].push(e)}return t.summon(n),!0}),l.set("Strafing Run","lane"),s.set("Strafing Run",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[1-a].Name&&"Creep"==e[1-a].CardType&&(e[1-a].currentHealth[0]-=2-r(e[1-a].currentArmor))}),n.collapse(),!0}),l.set("Lightning Strike","lane"),s.set("Lightning Strike",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[1-a].currentHealth[0]-=6-r(n.towers[1-a].currentArmor),n.towers[1-a].updateDisplay(),!0}),l.set("Rolling Storm","lane"),s.set("Rolling Storm",function(e,t){let n=G.getTurn();return i.lanes.forEach(function(e){e.towers[n].currentHealth[0]-=2-r(e.towers[n].currentArmor),e.towers[n].updateDisplay(),e.towers[1-n].currentHealth[0]-=2-r(e.towers[1-n].currentArmor),e.towers[1-n].updateDisplay()}),!0}),l.set("Tower Barrage","lane"),s.set("Tower Barrage",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[1-a].Name&&(e[1-a].currentHealth[0]-=2-r(e[1-a].currentArmor))}),n.collapse(),!0}),l.set("Foresight","lane"),s.set("Foresight",function(e,t){let n=G.players[G.getTurn()];return n.draw(),n.draw(),!0}),l.set("Prey on the Weak","lane"),s.set("Prey on the Weak",function(e,t){let n=i.lanes[t],a=[[],[]],r=G.getTurn();return n.cards.forEach(function(e){if(null!=e[1-r].Name&&e[1-r].currentHealth[0]<e[1-r].Health){let e=v(O.Cards.find(function(e){return"Hound of War"==e.Name}),G.players[G.getTurn()]);a[G.getTurn()].push(e)}if(null!=e[r].Name&&e[r].currentHealth[0]<e[r].Health){let e=v(O.Cards.find(function(e){return"Hound of War"==e.Name}),G.players[G.getTurn()]);a[G.getTurn()].push(e)}}),n.summon(a),!0}),l.set("Remote Detonation","lane"),s.set("Remote Detonation",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[1-a].Name&&null==e[a].Name&&(e[1-a].currentHealth[0]-=5-r(e[1-a].currentArmor))}),n.collapse(),!0}),l.set("Thunderstorm","lane"),s.set("Thunderstorm",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[1-a].Name&&(e[1-a].currentHealth[0]-=4-r(e[1-a].currentArmor))}),n.collapse(),!0}),l.set("Bolt of Damocles","lane"),s.set("Bolt of Damocles",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[1-a].currentHealth[0]-=20-r(n.towers[1-a].currentArmor),n.towers[1-a].updateDisplay(),!0}),l.set("Stars Align","lane"),s.set("Stars Align",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[a].mana[0]+=3,n.towers[a].updateDisplay(),!0}),l.set("Bellow","unit"),s.set("Bellow",function(e,t,n,a){let r=[[],[]];if("Creep"!=i.lanes[t].cards[a][n].CardType)return!1;let s=i.lanes[t].cards[a][n],l=h(t);return i.lanes[t].cards[a][n]=l,s.div.parentNode.replaceChild(l.div,s.div),r[n].push(s),i.lanes[(t+Math.ceil(2*Math.random()))%3].summon(r),!0}),l.set("Rumusque Blessing","lane"),s.set("Rumusque Blessing",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[a].Name&&(e[a].currentHealth[1]+=3,e[a].updateDisplay())}),!0}),l.set("Defensive Bloom","lane"),s.set("Defensive Bloom",function(e,t){let n=[[],[]];t=i.lanes[t];for(let e=0;e<2;e++){let e=v(O.Cards.find(function(e){return"Roseleaf Wall"==e.Name}),G.players[G.getTurn()]);n[G.getTurn()].push(e)}return t.summon(n),!0}),l.set("Restoration Effort","lane"),s.set("Restoration Effort",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[a].currentHealth[0]+=8,n.towers[a].updateDisplay(),!0}),l.set("Intimidation","unit"),s.set("Intimidation",function(e,t,n,a){let r=[[],[]],s=i.lanes[t].cards[a][n],l=h(t);return i.lanes[t].cards[a][n]=l,s.div.parentNode.replaceChild(l.div,s.div),r[n].push(s),i.lanes[(t+Math.ceil(2*Math.random()))%3].summon(r),!0}),l.set("Curse of Atrophy","lane"),s.set("Curse of Atrophy",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.cards.forEach(function(e){null!=e[1-a].Name&&"Hero"==e[1-a].CardType&&(e[1-a].currentAttack[2]-=2,e[1-a].updateDisplay())}),!0}),l.set("Grazing Shot","unit"),s.set("Grazing Shot",function(e,t,n,a){let s=i.lanes[t];return s.cards[a][n].currentHealth[0]-=2-r(s.cards[a][n].currentArmor),s.collapse(),!0}),l.set("Mana Drain","lane"),s.set("Mana Drain",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[a].mana[0]+=2,n.towers[a].updateDisplay(),n.towers[1-a].mana[0]-=2,n.towers[1-a].updateDisplay(),!0}),l.set("No Accident","unit"),s.set("No Accident",function(e,t,n,a){let s=i.lanes[t];return s.cards[a][n].currentHealth[0]-=3-r(s.cards[a][n].currentArmor),s.collapse(),!0}),l.set("Payday","lane"),s.set("Payday",function(e,t){return G.players[G.getTurn()].gold*=2,G.infoDisplayUpdate(),!0}),l.set("Slay","unit"),s.set("Slay",function(e,t,n,a){let r=i.lanes[t];return"Creep"==r.cards[a][n].CardType&&(G.condemn(r.cards[a][n],i.lanes[t]),G.infoDisplayUpdate(),r.collapse(),!0)}),l.set("Arcane Censure","lane"),s.set("Arcane Censure",function(e,t){let n=i.lanes[t],a=G.getTurn();return n.towers[1-a].mana[1]-=1,n.towers[1-a].mana[0]-=1,n.towers[1-a].updateDisplay(),!0}),l.set("Pick Off","unit"),s.set("Pick Off",function(e,t,n,a){let s=i.lanes[t];return s.cards[a][n].currentHealth[0]-=4-r(s.cards[a][n].currentArmor),s.collapse(),!0}),l.set("Assassinate","unit"),s.set("Assassinate",function(e,t,n,a){let s=i.lanes[t];return s.cards[a][n].currentHealth[0]-=10-(r(s.cards[a][n].currentArmor)<0?r(s.cards[a][n].currentArmor):0),s.collapse(),!0});const o=e=>{let t=document.createElement("div"),n=[void 0,void 0],a=[void 0,void 0],o=[],c=[[],[]],u=[document.createElement("div"),document.createElement("div")];u.forEach(function(e,n){e.classList.add("improvement",n?"top":"bottom"),t.appendChild(e)}),t.ondragover=function(e){e.preventDefault()},t.addEventListener("dragenter",function(e){e.target.classList.add("dragover")}),t.addEventListener("dragleave",function(e){e.target.classList.remove("dragover")}),t.ondrop=(e=>f(e));const f=t=>{t.preventDefault(),null!=t&&t.target.classList.remove("dragover"),i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]<d.ManaCost||e!=G.getCurrentLane()&&!d.CrossLane||"lane"!=l.get(d.Name)&&"Improvement"!=d.CardType||i.lanes[G.getCurrentLane()].cards.some(m)&&("Improvement"==d.CardType?(d.div.draggable=!1,c[G.getTurn()].push(d),u[G.getTurn()].appendChild(d.div)):(s.get(d.Name)(t,e),d.div.parentNode.removeChild(d.div)),i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]-=d.ManaCost,i.lanes[G.getCurrentLane()].towers[G.getTurn()].updateDisplay(),G.players[G.getTurn()].hand.splice(G.players[G.getTurn()].hand.indexOf(d),1),p(),v(),G.nextTurn())},p=(t=!0)=>{o.flat().forEach(function(t){null!=t.currentHealth&&r(t.currentHealth)<=0&&G.condemn(t,i.lanes[e])});let n=!1;o.forEach(function(e,t){e.forEach(function(e,n){null!=e.Name&&null==o[t+e.arrow][1-n].Name&&(e.arrow=0)})}),o.forEach(function(e,t){null==e[0].Name&&null==e[1].Name&&(n=!0,e[0].div.parentNode.removeChild(e[0].div),e[1].div.parentNode.removeChild(e[1].div),o.splice(t,1))}),n?p(t):t&&G.dispatchEvent("continuousRefresh")},v=()=>{if(0==o.reduce(W,[[],[]])[G.getTurn()].length){let t=[h(e,a[0],o.length),h(e,a[1],o.length)],n=[h(e,a[0],0),h(e,a[1],0)];o.push(t),o.unshift(n)}};return{name:name,div:t,cards:o,towers:n,improvements:c,playAreas:a,stages:[],passCount:0,collapse:p,expand:v,summon:(t,n=!0)=>{t.forEach(function(t,n){for(;o.reduce(W,[[],[]])[n].length<t.length;){let t=Math.random()<.5;t=t?a[0].childNodes.length:0;let n=[h(e,a[0],t),h(e,a[1],t)];t?o.push(n):o.unshift(n)}}),t.forEach(function(t,a){t.forEach(function(t){let r=o.reduce(W,[[],[]])[a];r=r[Math.floor(Math.random()*r.length)];let s=o[r][a].div;s.parentNode.replaceChild(t.div,s),o[r][a]=t,t.arrow=0,null!=o[r][1-a].Name&&(o[r][1-a].arrow=0),n&&(t.rndArrow(e,r,a),G.dispatchEvent("continuousRefresh"))})})},drop:f}},i={div:document.getElementById("board"),lanes:[o(0),o(1),o(2)],collapse:()=>{i.lanes.forEach(function(e){e.collapse(!1)}),G.dispatchEvent("continuousRefresh")}};let d,c=new Map,u=new Map;function f(e,t,n,a,r=!0){let s=e.Abilities.findIndex(function(e){return console.log(e.div,t),e.div==t});e.Abilities[s].div.classList.add("glow"),G.div.addEventListener("click",function t(l){l.stopPropagation();e:{let t,o=l.path.find(function(e){if(e.classList)return e.classList.contains("lane")});if(void 0!=o){if(o=i.lanes.find(function(e){return e.div==o}),"card"==n||"empty"==n){if(void 0==(t=l.path.find(function(e){if(e.classList)return e.classList.contains("playarea")})))break e;t=o.playAreas.findIndex(function(e){return e==t})}else if("tower"==n){if(void 0==(t=l.path.find(function(e){if(e.classList)return e.classList.contains("tower")})))break e;t=o.towers.findIndex(function(e){return e.div==t})}if("card"==n){if(void 0==(n=l.path.find(function(e){if(e.classList)return e.classList.contains("card")})))break e;n=o.cards.findIndex(function(e){return e[t].div==n})}else if("empty"==n){if(void 0==(n=l.path.find(function(e){if(e.classList)return e.classList.contains("blank")})))break e;n=o.cards.findIndex(function(e){return e[t].div==n})}else"tower"==n&&(n=t);r(o,t,n)&&(a(o,t,n),e.Abilities[s].currentCooldown=e.Abilities[s].Cooldown,e.updateDisplay(),G.nextTurn())}}e.Abilities[s].div.classList.remove("glow"),G.div.removeEventListener("click",t,!0)},!0)}function p(e,t){return e=function(){let n=e;return function(){t(),n.apply(this)}}()}c.set("testAbility",function(){console.log("testAbility")}),u.set("Pack Leadership","continuousEffect"),c.set("Pack Leadership",function(e,t){for(var n=-1;n<2;n+=2){let e=i.lanes[t.detail.lane],a=t.detail.card;null!=e.cards[a+n]&&null!=e.cards[a+n][t.detail.player].Name&&(e.cards[a+n][t.detail.player].currentArmor[4]+=1,e.cards[a+n][t.detail.player].updateDisplay())}}),u.set("Wisdom of the Elders","click"),c.set("Wisdom of the Elders",function(e,t){return e.player.draw(),e.player.draw(),!0}),u.set("Work the Knife","whenAttacking"),c.set("Work the Knife",function(e,t){let n=i.lanes[t.detail.lane],a=t.detail.card+e.arrow;null!=n.cards[a]&&null!=n.cards[a][1-t.detail.player].Name&&"Creep"==n.cards[a][1-t.detail.player].CardType||(e.currentAttack[4]+=2)}),u.set("Arcane Aura","afterCardPlayed"),c.set("Arcane Aura",function(e,t){}),u.set("Ignite : Effect","beforeTheActionPhase"),c.set("Ignite : Effect",function(e,t){let n=i.lanes[t.detail.lane];n.cards.forEach(function(e){null!=e[1-t.detail.player].Name&&(e[1-t.detail.player].currentHealth[0]-=1-(r(e[1-t.detail.player].currentArmor)<0?r(e[1-t.detail.player].currentArmor):0))}),n.collapse()}),u.set("Conflagration : Effect","beforeTheActionPhase"),c.set("Conflagration : Effect",function(e,t){let n=i.lanes[t.detail.lane];n.cards.forEach(function(e){null!=e[1-t.detail.player].Name&&(e[1-t.detail.player].currentHealth[0]-=2-r(e[1-t.detail.player].currentArmor))}),n.collapse()}),u.set("Burning Oil : Effect","continuousEffect"),c.set("Burning Oil : Effect",function(e,t){}),u.set("Assault Ladders : Effect","whenAttacking"),c.set("Assault Ladders : Effect",function(e,t){let n=i.lanes[t.detail.lane];n.cards.forEach(function(e,a){null!=e[t.detail.player].Name&&(null!=n.cards[a+e.arrow]&&null!=n.cards[a+e.arrow][1-t.detail.player].Name||(n.cards[a][t.detail.player].currentAttack[4]+=2))})}),u.set("Mist of Avernus : Effect","beforeTheActionPhase"),c.set("Mist of Avernus : Effect",function(e,t){i.lanes[t.detail.lane].cards.forEach(function(e){null!=e[t.detail.player].Name&&(e[t.detail.player].currentAttack[1]+=1,e[t.detail.player].updateDisplay())})}),u.set("Verdant Refuge : Effect","continuousEffect"),c.set("Verdant Refuge : Effect",function(e,t){i.lanes[t.detail.lane].cards.forEach(function(e){null!=e[t.detail.player].Name&&(e[t.detail.player].currentArmor[4]+=1,e[t.detail.player].updateDisplay())})}),u.set("Steam Cannon : Effect","click"),c.set("Steam Cannon : Effect",function(e,t){return f(e,t.currentTarget,"card",function(e,t,n){e.cards[n][t].currentHealth[0]-=4-(r(e.cards[n][t].currentArmor)<0?r(e.cards[n][t].currentArmor):0),e.collapse()},function(){return!0}),!1}),u.set("Keenfolk Turret : Effect","click"),c.set("Keenfolk Turret : Effect",function(e,t){return f(e,t.currentTarget,"card",function(e,t,n){e.cards[n][t].currentHealth[0]-=2-(r(e.cards[n][t].currentArmor)<0?r(e.cards[n][t].currentArmor):0),e.collapse()},function(e,t,n){return e==i.lanes[G.getCurrentLane()]}),!1}),u.set("Assassin's Apprentice : Effect","click"),c.set("Assassin's Apprentice : Effect",function(e,t){let n=i.lanes[G.getCurrentLane()],a=G.getTurn(),r=n.cards.findIndex(function(t){return t[a]==e});return f(e,t.currentTarget,"card",function(t,n,a){e.arrow=a-r},function(e,t,n){return e==i.lanes[G.getCurrentLane()]&&a!=t&&Math.abs(n-r)<=1}),!1}),u.set("Troll Soothsayer : Effect","endOfRound"),c.set("Troll Soothsayer : Effect",function(e,t){e.player.draw()}),u.set("Legion Standard Bearer : Effect","continuousEffect"),c.set("Legion Standard Bearer : Effect",function(e,t){for(var n=-1;n<2;n+=2){let e=i.lanes[t.detail.lane],a=t.detail.card;null!=e.cards[a+n]&&null!=e.cards[a+n][t.detail.player].Name&&(e.cards[a+n][t.detail.player].currentAttack[4]+=4,e.cards[a+n][t.detail.player].updateDisplay())}}),u.set("Mercenary Exiles : Effect","click"),c.set("Mercenary Exiles : Effect",function(e,t){let n=Math.floor(e.player.gold/2);return e.player.gold=0,e.currentAttack[1]+=n,e.currentHealth[1]+=n,e.updateDisplay(),G.infoDisplayUpdate(),!0}),u.set("Satyr Magician : Effect","click"),c.set("Satyr Magician : Effect",function(e,t){let n=i.lanes[G.getCurrentLane()].towers[G.getTurn()];return n.mana[0]=n.mana[1],n.updateDisplay(),!0}),u.set("Disciple of Nevermore : Effect","continuousEffect"),c.set("Disciple of Nevermore : Effect",function(e,t){let n=i.lanes[t.detail.lane];n.cards.forEach(function(e){null!=e[t.detail.player].Name&&n.cards[t.detail.card]!=e&&(e[t.detail.player].currentArmor[4]-=2,e[t.detail.player].currentAttack[4]+=2,e[t.detail.player].updateDisplay())})}),u.set("Ravenous Mass : Effect","click"),c.set("Ravenous Mass : Effect",function(e,t){let n=i.lanes[G.getCurrentLane()],a=G.getTurn(),s=n.cards.findIndex(function(t){return t[a]==e});for(var l=-1;l<2;l+=2)null!=n.cards[s+l]&&null!=n.cards[s+l][a].Name&&(e.currentAttack[1]+=r(n.cards[s+l][a].currentAttack),e.currentHealth[1]+=r(n.cards[s+l][a].currentHealth),G.condemn(n.cards[s+l][a],n));return n.collapse(),!0}),u.set("Rampaging Hellbear : Effect","afterCombat"),c.set("Rampaging Hellbear : Effect",function(e,t){e.currentAttack[1]+=4,e.updateDisplay()}),u.set("Satyr Duelist : Effect","afterCombat"),c.set("Satyr Duelist : Effect",function(e,t){e.currentAttack[1]+=2,e.updateDisplay()}),u.set("Savage Wolf : Effect","afterCombat"),c.set("Savage Wolf : Effect",function(e,t){e.currentAttack[1]+=1,e.currentHealth[1]+=2,e.updateDisplay()}),u.set("Selfish Cleric : Effect","afterCombat"),c.set("Selfish Cleric : Effect",function(e,t){e.currentHealth[0]=e.Health,e.updateDisplay()}),u.set("Revtel Convoy : Effect","continuousEffect"),c.set("Revtel Convoy : Effect",function(e,t){let n=Math.floor(e.player.gold/2);e.currentAttack[4]+=n,e.updateDisplay()});const m=e=>{if("Hero"==e[G.getTurn()].CardType)return e[G.getTurn()].Color==d.Color},h=(e,t,n)=>{let a=document.createElement("div");a.classList.add("blank"),null!=t&&(n?t.insertBefore(a,t.childNodes[n-1].nextSibling):t.insertBefore(a,t.firstChild)),a.ondragover=function(e){e.preventDefault()},a.ondragenter=function(e){e.target.classList.add("dragover")},a.ondragleave=function(e){e.target.classList.remove("dragover")},a.ondrop=(e=>r(e));const r=t=>{if(t.preventDefault(),null!=t&&t.target.classList.remove("dragover"),!(i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]<d.ManaCost)&&e==G.getCurrentLane()&&"Creep"==d.CardType&&i.lanes[G.getCurrentLane()].cards.some(m)){let t=i.lanes[e].cards.flat().findIndex(function(e){return e.div==s.div}),n=t%2;t=Math.floor(t/2),n==G.getTurn()&&(d.div.draggable=!1,a.parentNode.replaceChild(d.div,a),i.lanes[e].cards[t][n]=d,i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]-=d.ManaCost,i.lanes[G.getCurrentLane()].towers[G.getTurn()].updateDisplay(),null!=i.lanes[e].cards[t][1-n].Name&&(i.lanes[e].cards[t][1-n].arrow=0,i.lanes[e].cards[t][1-n].updateDisplay()),G.players[G.getTurn()].hand.splice(G.players[G.getTurn()].hand.indexOf(d),1),i.lanes[e].collapse(),i.lanes[e].expand(),G.dispatchEvent("continuousRefresh"),G.nextTurn())}};let s={div:a,drop:r};return{div:a,drop:r}},v=(e,t)=>{let n="../node_modules/artifactdb/assets",a=document.createElement("div"),o=()=>{},f=()=>{},h=()=>{},v=()=>{},g={div:a,player:t};a.classList.add("card",e.Color,e.CardType);let y=document.createElement("IMG");if(y.draggable=!1,y.src=`${n}/artwork/large/${e.fileName}.jpg`,a.appendChild(y),"Hero"==e.CardType&&(g.respawn=0,g.Bounty=5),"Creep"==e.CardType&&(g.Bounty=1),null!=e.ManaCost){let t=document.createElement("div");t.classList.add("mana-cost"),t.textContent=e.ManaCost,a.appendChild(t)}if(null!=e.Text&&""!=e.Text){let t=document.createElement("div");t.classList.add("card-text");let r=document.createElement("IMG");r.draggable=!1,r.src=`${n}/text_background.jpg`;let s=document.createElement("span");s.textContent=e.Text,a.appendChild(t),t.appendChild(r),t.appendChild(s)}let C=document.createElement("div");if(C.classList.add("name"),C.textContent=e.Name,a.appendChild(C),"Creep"==e.CardType||"Hero"==e.CardType){g.arrow=0;let t=["left","middle","right"],n=document.createElement("div");n.classList.add("arrow",t[1+g.arrow]),a.appendChild(n),g.rndArrow=((t,n,a)=>{if("number"==typeof t&&(t=i.lanes[t]),null==t.cards[n][1-a].Name){let r=Math.random();r=r>.75?1:(r>.25)-1,null!=t.cards[n+r]&&null!=t.cards[n+r][1-a].Name||(r=0),e.arrow=r}e.updateDisplay()}),o=p(o,function(){n.classList.remove("left","middle","right"),n.classList.add("arrow",t[1+e.arrow])})}if(null!=e.Health){g.currentHealth=[e.Health,0,0,0,0,0];let t=document.createElement("div");t.classList.add("icon-container","health");let s=document.createElement("IMG");s.draggable=!1,s.src=`${n}/icon/cardstat-health.png`;let l=document.createElement("div");l.textContent=r(g.currentHealth),t.appendChild(s),t.appendChild(l),a.appendChild(t),o=p(o,function(){l.textContent=r(e.currentHealth)}),f=p(f,function(){e.currentHealth[3]=0}),v=p(v,function(){e.currentHealth[4]=0}),h=p(h,function(){e.currentHealth[5]=0})}if(null!=e.Attack){g.currentAttack=[e.Attack,0,0,0,0,0];let t=document.createElement("div");t.classList.add("icon-container","attack");let s=document.createElement("IMG");s.draggable=!1,s.src=`${n}/icon/cardstat-attack.png`;let l=document.createElement("div");l.textContent=e.Attack,t.appendChild(s),t.appendChild(l),a.appendChild(t),o=p(o,function(){l.textContent=r(e.currentAttack)}),f=p(f,function(){e.currentAttack[3]=0}),v=p(v,function(){e.currentAttack[4]=0}),h=p(h,function(){e.currentAttack[5]=0})}if(null!=e.Armor){g.currentArmor=[e.Armor,0,0,0,0,0];let t=document.createElement("div");t.classList.add("icon-container","armor");let s=document.createElement("IMG");s.draggable=!1,s.src=`${n}/icon/cardstat-armor.png`;let l=document.createElement("div");l.textContent=e.Armor,t.appendChild(s),t.appendChild(l),a.appendChild(t),o=p(o,function(){l.textContent=r(e.currentArmor)}),f=p(f,function(){e.currentArmor[3]=0}),v=p(v,function(){e.currentArmor[4]=0}),h=p(h,function(){e.currentArmor[5]=0})}if(null!=e.Abilities){g.Abilities=[];let r=document.createElement("div");r.classList.add("abilities-container"),e.Abilities.forEach(function(s,l){(s=Object.assign({},s)).div=document.createElement("div"),s.div.classList.add("ability-container");let d=document.createElement("IMG");if(d.draggable=!1,"Hero"==e.CardType){let e=function(e){return e.replace(" : Effect","").replace(/\s/g,"_").replace("'","").toLowerCase()}(s.Name);d.src=`${n}/ability/${e}.jpg`}else d.src=`${n}/artwork/small/${e.fileName}.jpg`;d.title=s.Text,s.div.appendChild(d),r.appendChild(s.div),"Active"==s.Type?("Hero"==e.CardType?s.currentCooldown=s.Cooldown:s.currentCooldown=0,s.cooldownDiv=document.createElement("div"),s.cooldownDiv.classList.add("cooldown","display-none"),s.cooldownDiv.textContent=s.currentCooldown,s.div.appendChild(s.cooldownDiv),s.div.addEventListener("click",function(n){G.players[G.getTurn()]==t&&G.getCurrentLane()==("Improvement"==e.CardType?i.lanes.findIndex(function(t){return t.improvements.flat().some(function(t){return t.div==e.div})}):i.lanes.findIndex(function(t){return t.cards.flat().some(function(t){return t.div==e.div})}))&&e.Abilities[l].currentCooldown<=0&&c.get(s.Name)(e,n)&&(e.Abilities[l].currentCooldown=e.Abilities[l].Cooldown,o(),G.nextTurn())}),f=p(f,function(){e.Abilities[l].currentCooldown-=1}),o=p(o,function(){e.Abilities[l].currentCooldown<=0?e.Abilities[l].cooldownDiv.classList.add("display-none"):(e.Abilities[l].cooldownDiv.classList.remove("display-none"),e.Abilities[l].cooldownDiv.textContent=e.Abilities[l].currentCooldown)})):a.addEventListener(u.get(s.Name),function(t){c.get(s.Name)(e,t)}),g.Abilities.push(s)}),a.appendChild(r)}return a.ondragover=function(e){e.preventDefault()},a.addEventListener("dragenter",function(e){e.target.classList.add("dragover")}),a.addEventListener("dragleave",function(e){e.target.classList.remove("dragover")}),a.ondrop=(e=>g.drop(e)),g.drop=(e=>{if(e.preventDefault(),null!=e&&e.target.classList.remove("dragover"),i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]<d.ManaCost)return;let t=i.lanes.findIndex(function(t){return t.div==e.currentTarget.parentNode.parentNode});if((t==G.getCurrentLane()||d.CrossLane)&&"unit"==l.get(d.Name)&&i.lanes[G.getCurrentLane()].cards.some(m)){let n=i.lanes[t].cards.flat().findIndex(function(t){return t.div==e.currentTarget}),a=n%2;n=Math.floor(n/2),s.get(d.Name)(e,t,a,n)&&(d.div.draggable=!1,i.lanes[G.getCurrentLane()].towers[G.getTurn()].mana[0]-=d.ManaCost,i.lanes[G.getCurrentLane()].towers[G.getTurn()].updateDisplay(),d.div.parentNode.removeChild(d.div),G.players[G.getTurn()].hand.splice(G.players[G.getTurn()].hand.indexOf(d),1),G.nextTurn())}}),a.addEventListener("click",function(){console.log(e)}),a.ondragstart=function(t){d=e,null!=t.dataTransfer&&t.dataTransfer.setData("text/plain"," ")},a.addEventListener("endOfRound",f),a.addEventListener("afterCombat",h),a.addEventListener("continuousRefresh",v),g.updateDisplay=o,e=Object.assign({},e,g)};var g=(()=>{const e=document.getElementById("zoom-btn"),t=document.getElementById("zoom-btn-left"),n=document.getElementById("zoom-btn-middle"),a=document.getElementById("zoom-btn-right");e.addEventListener("click",function(){i.div.classList.toggle("zoom-out"),G.div.classList.toggle("zoom-out"),i.lanes[G.getCurrentLane()].div.scrollIntoView({inline:"center"})}),t.addEventListener("click",function(){i.div.classList.remove("zoom-out"),G.div.classList.remove("zoom-out"),i.lanes[0].div.scrollIntoView({inline:"center"})}),n.addEventListener("click",function(){i.div.classList.remove("zoom-out"),G.div.classList.remove("zoom-out"),i.lanes[1].div.scrollIntoView({inline:"center"})}),a.addEventListener("click",function(){i.div.classList.remove("zoom-out"),G.div.classList.remove("zoom-out"),i.lanes[2].div.scrollIntoView({inline:"center"})});return{updateActive:()=>{switch(G.getCurrentLane()){case 0:t.classList.add("active"),n.classList.remove("active"),a.classList.remove("active");break;case 1:t.classList.remove("active"),n.classList.add("active"),a.classList.remove("active");break;case 2:t.classList.remove("active"),n.classList.remove("active"),a.classList.add("active")}}}})();var y=(()=>{const e=document.getElementById("pass-btn-bottom"),t=document.getElementById("pass-btn-top"),n=()=>{e.classList.add("display-none"),t.classList.add("display-none")};return n(),setTimeout(function(){e.onclick=G.pass,t.onclick=G.pass},100),{enable:()=>{G.getTurn()?t.disabled=!1:e.disabled=!1,G.getTurn()?e.disabled=!0:t.disabled=!0},disable:()=>{e.disabled=!0,t.disabled=!0},hide:n,show:()=>{e.classList.remove("display-none"),t.classList.remove("display-none")}}})();var C=(()=>{let e=[],t=[];return{initialize:()=>{e=[G.players[0].hand,G.players[1].hand],t=[G.players[0].handDiv,G.players[1].handDiv]},enable:()=>{e[G.getTurn()].forEach(function(e){e.div.draggable=!0}),e[1-G.getTurn()].forEach(function(e){e.div.draggable=!1})},disable:()=>{for(var t=0;t<e.length;t++)e[t].forEach(function(e){e.div.draggable=!1})},hide:()=>{for(var n=0;n<e.length;n++)t[n].classList.add("hide")},show:()=>{for(var n=0;n<e.length;n++)t[n].classList.remove("hide")}}})();const E=[],L=document.createElement("button");let T=[];function A(e){e.preventDefault()}function w(e){e.target.classList.add("dragover")}function b(e){e.target.classList.remove("dragover")}function D(){const e=document.createElement("div");e.classList.add("bottom","display-none");const t=document.createElement("div");t.classList.add("top","display-none"),E.push(e),E.push(t),E.forEach(function(e){e.classList.add("stage","UI"),G.div.appendChild(e)}),L.classList.add("deploy-btn","btn","UI","display-none"),L.textContent="Разместить",G.div.appendChild(L),L.addEventListener("click",function(){E[0].hasChildNodes()||E[1].hasChildNodes()?alert("Выберите линии для всех героев"):function(){(function(){for(let e=0;e<2;e++)E[e].classList.add("display-none"),i.lanes.forEach(function(t){t.stages[e].classList.add("display-none")})})(),L.classList.add("display-none");for(let e=0;e<3;e++){let t=i.lanes[e];t.summon([T[0][e],T[1][e]],!1),0!=G.getRound()&&t.cards.forEach(function(e,n){e.forEach(function(e,a){null!=e.Name&&e.rndArrow(t,n,a)})})}G.dispatchEvent("continuousRefresh"),G.players.forEach(function(e){e.draw(),e.draw()}),G.nextTurn(),G.dispatchEvent("beforeTheActionPhase"),y.show(),C.show()}()}),i.lanes.forEach(function(e,t){e.stages.forEach(function(e,n){e.ondragover=A,e.ondragenter=w,e.ondragleave=b,e.ondrop=function(a){a.preventDefault(),b(a),d.player==G.players[n]&&"Hero"==d.CardType&&(e.appendChild(d.div),T[n][t].push(d),d.div.draggable=!1)}})})}function k(){T[0]=[[],[],[]],T[1]=[[],[],[]],null==E[0]&&D(),i.div.classList.add("zoom-out"),G.div.classList.add("zoom-out"),function(){for(let e=0;e<2;e++)E[e].classList.remove("display-none"),i.lanes.forEach(function(t){t.stages[e].classList.remove("display-none")})}(),T.forEach(function(e,t){for(let n=0;n<2;n++){let n=Math.floor(3*Math.random()),a=v(O.Cards[132],G.players[t]);e[n].push(a),i.lanes[n].stages[t].appendChild(a.div)}if(0==G.getRound()){let r=a([0,1,2]);for(var n=0;n<3;n++){let a=G.players[t].getHeros()[n];i.lanes[r[n]].stages[t].appendChild(a.div),e[r[n]].push(a)}}G.players[t].getHeros().forEach(function(n){if(0==n.respawn&&0!=G.getRound())if(G.players[t].computer){let a=Math.floor(3*Math.random());e[a].push(n),i.lanes[a].stages[t].appendChild(n.div)}else E[t].appendChild(n.div),n.div.draggable=!0,n.updateDisplay();n.respawn-=1})}),L.classList.remove("display-none")}var N=(()=>{const e=document.getElementById("shop"),t=document.createElement("button");t.innerHTML="Продолжить",t.classList.add("close-btn","btn"),t.type="submit",e.appendChild(t),t.addEventListener("click",function(){e.classList.add("display-none"),k()});return{show:()=>{e.classList.remove("display-none"),t.focus()}}})();var M=()=>{const e=[],t=[document.getElementById("info-bottom"),document.getElementById("info-top")];G.players.forEach(function(n,a){t[a].classList.remove("display-none"),t[a].getElementsByClassName("name")[0].textContent=`${n.name}`,e.push(t[a].getElementsByClassName("gold")[0]),e[a].textContent=n.gold});return{updateDisplay:()=>{G.players.forEach(function(t,n){e[n].textContent=t.gold})}}};const H=document.getElementById("last-played-top");let x=document.createElement("div");function S(e,t,n){return null!=t[0].Name&&"Hero"==t[0].CardType&&e[0].push(n),null!=t[1].Name&&"Hero"==t[0].CardType&&e[1].push(n),e}function B(e,t,n){return null!=t[0].Name&&"Creep"==t[0].CardType&&e[0].push(n),null!=t[1].Name&&"Creep"==t[1].CardType&&e[1].push(n),e}H.appendChild(x);let R=["Intimidation","Bellow","Relentless Pursuit","Viscous Nasal Goo","Crippling Blow","Rend Armor","Grazing Shot","No Accident","Slay","Pick Off","Assassinate"];R=new Map(R.map(e=>[e,!0]));let I=["Slay","Bellow"];I=new Map(I.map(e=>[e,!0]));var P={actionPhase:e=>{let t;a(e.hand);e:for(var n=0;n<e.hand.length;n++)if(((t=e.hand[n]).ManaCost||0)<=i.lanes[G.getCurrentLane()].towers[e.turn].mana[0]&&(t.div.ondragstart(new DragEvent({setData:null})),i.lanes[G.getCurrentLane()].cards.some(m))){if("Creep"==d.CardType){let t=i.lanes[G.getCurrentLane()].cards.reduce(W,[[],[]])[e.turn],n={preventDefault:()=>{},target:(t=i.lanes[G.getCurrentLane()].cards[t[Math.floor(Math.random()*t.length)]][e.turn]).div,currentTarget:t.div};t.drop(n);break e}if("Improvement"==d.CardType){let e=i.lanes[Math.floor(3*Math.random())],t={preventDefault:()=>{},target:e.div,currentTarget:e.div};e.drop(t);break e}if("Spell"==d.CardType){let n,a=l.get(d.Name);if(n=d.CrossLane?i.lanes[Math.floor(3*Math.random())]:i.lanes[G.getCurrentLane()],"lane"==a)a=n;else if("unit"==a){let r=R.get(t.Name)?1-e.turn:e.turn;if((a=I.get(t.Name)?n.cards.reduce(B,[[],[]])[r]:n.cards.reduce(S,[[],[]])[r]).length<=0)break e;a=n.cards[a[Math.floor(Math.random()*a.length)]][r]}let r={preventDefault:()=>{},target:a.div,currentTarget:a.div};a.drop(r);break e}break e}G.getTurn()!=e.turn&&(t=t.div.cloneNode(!0),x.parentNode.replaceChild(t,x),x=t),setTimeout(function(){G.getTurn()==e.turn&&G.pass()},300)}};n.d(t,"game",function(){return G}),n.d(t,"cardData",function(){return O}),n.d(t,"posAvail",function(){return W});let O="not loaded yet";!function(e){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","../node_modules/artifactdb/cards-manifest.json",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)}(function(e){O=JSON.parse(e).Sets[0]});const $=(e,t)=>{e=[e];let n=document.createElement("div"),a=document.createElement("span");a.textContent=r(e);let s=document.createElement("div");n.appendChild(s),n.appendChild(a),s.classList.add("mana");let l=!1,o=[3,3];s.textContent=`${o[0]} : ${o[1]}`;setTimeout(function(){i.lanes[t].div.addEventListener("endOfRound",function(){d.mana[1]+=1,d.manaDiv.textContent=`${d.mana[0]} : ${d.mana[1]}`,o[0]=o[1],d.manaDiv.textContent=`${o[0]} : ${o[1]}`})},10);let d={currentHealth:e,div:n,Name:"tower",currentArmor:[0],mana:o,manaDiv:s,updateDisplay:()=>{r(d.currentHealth)<=0&&(G.score[1-t]+=1,l||(l=!l,d.currentHealth=[80],n.classList.add("ancient"))),a.textContent=r(d.currentHealth),d.manaDiv.textContent=`${d.mana[0]} : ${d.mana[1]}`}};return d},z=(e,t,n,r,s=!1)=>{let l={};return setTimeout(function(){(n=n.map(function(e){return v(O.Cards.find(function(t){return t.Name==e}),l)}))[3].respawn=1,n[4].respawn=2,a(r)},300),l.turn=e,l.handDiv=e?document.getElementById("hand-top"):document.getElementById("hand-bottom"),l.hand=[],l.draw=(()=>{let e=r.shift();if(null!=e){let t=v(O.Cards.find(function(t){return t.Name==e}),l);l.hand.push(t),l.handDiv.appendChild(t.div)}}),l.getHeros=(()=>n),l.name=t,l.computer=s,l.gold=0,l},G=(()=>{const e=document.getElementById("game");let t=["Steam Cannon","Keenfolk Turret","Assassin's Apprentice","Grazing Shot","No Accident","Slay","Pick Off","Selfish Cleric","Revtel Convoy","Ravenous Mass","Rampaging Hellbear","Satyr Duelist","Savage Wolf","Satyr Magician","Disciple of Nevermore","Legion Standard Bearer","Mercenary Exiles","Verdant Refuge","Mist of Avernus","Ignite","Assault Ladders","Mana Drain","Payday","Arcane Censure","Stars Align","Bellow","Rumusque Blessing","Defensive Bloom","Restoration Effort","Intimidation","Curse of Atrophy","Strafing Run","Lightning Strike","Rolling Storm","Tower Barrage","Foresight","Prey on the Weak","Remote Detonation","Thunderstorm","Bolt of Damocles","Poised to Strike","Defensive Stance","Enrage","God's Strength","Spring the Trap","Double Edge","Conflagration","Call the Reserves","Better Late Than Never","Iron Branch Protection","Avernus' Blessing","Dimensional Portal","Bronze Legionnaire","Marrowfell Brawler","Ogre Conscript","Troll Soothsayer","Untested Grunt","Thunderhide Alpha"];t=t.concat(t,t);let n,a=[z(0,"Силы света",["Debbi the Cunning","Keefe the Bold","Fahrvhan the Dreamer","J'Muy the Wise","Axe"],t.slice()),z(1,"Силы тьмы",["Debbi the Cunning","Keefe the Bold","Fahrvhan the Dreamer","J'Muy the Wise","Axe"],t,!0)],s=Math.random()<.5,l=0,o=0,d=[0,0];let c=new CustomEvent("afterCombat",{detail:{lane:void 0,card:void 0,player:void 0}}),u=new CustomEvent("endOfRound",{detail:{lane:void 0,card:void 0,player:void 0}}),f=new CustomEvent("continuousRefresh",{detail:{lane:void 0,card:void 0,player:void 0}}),p=new CustomEvent("continuousEffect",{detail:{lane:void 0,card:void 0,player:void 0}}),m=new CustomEvent("whenAttacking",{detail:{lane:void 0,card:void 0,player:void 0}}),v=new CustomEvent("beforeTheActionPhase",{detail:{lane:void 0,card:void 0,player:void 0}});function E(e){let t={afterCombat:e=>{if(e==o)return c},endOfRound:e=>u,beforeTheActionPhase:e=>{if(e==o)return v},continuousRefresh:e=>f,_continuousEffect:e=>p,whenAttacking:e=>{if(e==o)return m}};i.lanes.forEach(function(n,a){let r=t[e](a);null!=r&&(r.detail.lane=a,n.cards.forEach(function(e,t){r.detail.card=t,e.forEach(function(e,t){null!=e.Name&&(r.detail.player=t,e.div.dispatchEvent(r),e.updateDisplay())})}),null!=r&&n.div.dispatchEvent(r),n.improvements.forEach(function(e,t){r.detail.player=t,e.forEach(function(e,t){r.detail.card=t,e.div.dispatchEvent(r),e.updateDisplay()})}))}),"continuousRefresh"==e&&E("_continuousEffect"),"endOfRound"==e&&G.players.forEach(function(n,a){n.getHeros().forEach(function(n){let r=t[e]();r.detail.player=a,n.respawn>=0&&n.div.dispatchEvent(r)})})}function L(e=!1){s=1-s,e||(i.lanes[o].passCount=0),y.enable(),C.enable(),i.lanes[o].collapse(!1),i.lanes[o].expand(),a[s].computer&&P.actionPhase(a[s])}return{div:e,getCurrentLane:()=>o,startGame:()=>{console.log("Game Started"),function(){let e=["left-lane","middle-lane","right-lane"],t=["bottom","top"];i.lanes.forEach(function(n,a){n.name=e[a],n.div.classList.add("lane",e[a]),i.div.appendChild(n.div);for(var r=1;r>=0;r--)n.playAreas[r]=document.createElement("div"),n.playAreas[r].classList.add("playarea",`playarea-${t[r]}`),n.towers[r]=$(40,r),n.towers[r].div.classList.add("tower",`tower-${t[r]}`),n.div.appendChild(n.playAreas[r]),n.div.appendChild(n.towers[r].div),n.stages[r]=document.createElement("div"),n.stages[r].classList.add("stage",`stage-${t[r]}`,"display-none"),n.div.appendChild(n.stages[r]);n.playAreas[1].addEventListener("scroll",function(){n.playAreas[0].scrollLeft=n.playAreas[1].scrollLeft}),n.playAreas[0].addEventListener("scroll",function(){n.playAreas[1].scrollLeft=n.playAreas[0].scrollLeft})})}(),n=M(),i.lanes[o].div.classList.add("active"),k(),G.players.forEach(function(e){for(var t=0;t<3;t++)e.draw()}),C.initialize(),y.enable(),g.updateActive()},getRound:()=>l,score:d,gameOver:()=>!(d[0]<2&&d[1]<2||(d[0]>=2&&d[1]>=2?alert("Tie Game"):d[0]>=2?alert(`${a[0].name} Wins`):d[1]>=2&&alert(`DEFErunT : ${a[1].name} Wins`),y.hide(),0)),getTurn:()=>s,nextTurn:L,pass:()=>{i.lanes[o].passCount+=1,i.lanes[o].passCount>1?(function(){let e=i.lanes[G.getCurrentLane()];G.dispatchEvent("whenAttacking"),e.cards.forEach(function(t,n){t.forEach(function(t,a){if(null==t.Name)return;let s=e.cards[n+t.arrow][1-a];null==s||null==s.Name?(s=a?e.towers[0]:e.towers[1]).currentHealth[0]-=r(t.currentAttack)-r(s.currentArmor):s.currentHealth[0]-=r(t.currentAttack)-r(s.currentArmor)})}),i.collapse(),e.towers[1].updateDisplay(),e.towers[0].updateDisplay(),G.dispatchEvent("afterCombat"),G.infoDisplayUpdate(),G.gameOver()}(),i.lanes[o].div.classList.remove("active"),(o+=1)>2?(y.hide(),C.hide(),N.show(),E("endOfRound"),o=0,l+=1):(L(),E("beforeTheActionPhase")),i.lanes[o].div.classList.add("active"),g.updateActive()):L(!0)},condemn:(e,t)=>{let n=t.cards.flat().indexOf(e),a=h(i.lanes.indexOf(t));e.div.classList.add("condemned"),e.div.parentNode.replaceChild(a.div,e.div),t.cards[Math.floor(n/2)][n%2]=a,e.player==G.players[0]?G.players[1].gold+=e.Bounty:G.players[0].gold+=e.Bounty,null!=e.respawn&&(e.respawn=1,e.currentHealth[0]=e.Health,e.updateDisplay())},players:a,infoDisplayUpdate:()=>{n.updateDisplay()},dispatchEvent:E}})();function W(e,t,n){return null==t[0].Name&&e[0].push(n),null==t[1].Name&&e[1].push(n),e}const j=document.getElementById("start-game-btn"),_=document.getElementById("start-screen");j.disabled=!0;setTimeout(function(){j.disabled=!1},500),j.addEventListener("click",function(){_.parentNode.removeChild(_),G.startGame()})}]);